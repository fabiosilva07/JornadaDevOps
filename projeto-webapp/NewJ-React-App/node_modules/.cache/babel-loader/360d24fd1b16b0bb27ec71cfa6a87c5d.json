{"ast":null,"code":"import _slicedToArray from\"/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import PageDefault from'../../../components/PageDefault';import{Link,useHistory}from'react-router-dom';import FormField from'../../../components/FormField';import Button from'../../../components/Button';import useForm from'../../../hocks/useForm';import videosRepository from'../../../repositories/videos';import categoriasRepository from'../../../repositories/categorias';function CadastroConteudo(){var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),categorias=_useState2[0],setCategorias=_useState2[1];var categoryTitles=categorias.map(function(_ref){var titulo=_ref.titulo;return titulo;});var _useForm=useForm({titulo:'',url:'',categoria:''}),handleChange=_useForm.handleChange,values=_useForm.values;useEffect(function(){categoriasRepository.getAll().then(function(categoriasFromServer){setCategorias(categoriasFromServer);});},[]);return/*#__PURE__*/React.createElement(PageDefault,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Cadastro de Video\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(event){event.preventDefault();// alert('Video Cadastrado com sucesso!!!1!');\nvar categoriaEscolhida=categorias.find(function(categoria){return categoria.titulo===values.categoria;});videosRepository.create({titulo:values.titulo,url:values.url,categoriaId:categoriaEscolhida.id}).then(function(){console.log('Cadastrou com sucesso!');history.push('/');});}},/*#__PURE__*/React.createElement(FormField,{label:\"T\\xEDtulo do V\\xEDdeo\",name:\"titulo\",value:values.titulo,onChange:handleChange}),/*#__PURE__*/React.createElement(FormField,{label:\"URL\",name:\"url\",value:values.url,onChange:handleChange}),/*#__PURE__*/React.createElement(FormField,{label:\"Categoria\",name:\"categoria\",value:values.categoria,onChange:handleChange,suggestions:categoryTitles}),/*#__PURE__*/React.createElement(Button,{type:\"submit\"},\"Cadastrar\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Link,{to:\"/cadastro/categorias\"},\"Cadastrar Categoria\"));}export default CadastroConteudo;","map":{"version":3,"sources":["/app/src/pages/cadastro/conteudo/index.js"],"names":["React","useState","useEffect","PageDefault","Link","useHistory","FormField","Button","useForm","videosRepository","categoriasRepository","CadastroConteudo","history","categorias","setCategorias","categoryTitles","map","titulo","url","categoria","handleChange","values","getAll","then","categoriasFromServer","event","preventDefault","categoriaEscolhida","find","create","categoriaId","id","console","log","push"],"mappings":"2HAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA0C,OAA1C,CACA,MAAOC,CAAAA,WAAP,KAAwB,iCAAxB,CACA,OAASC,IAAT,CAAgBC,UAAhB,KAAiC,kBAAjC,CACA,MAAOC,CAAAA,SAAP,KAAsB,+BAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,4BAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,wBAApB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,8BAA7B,CACA,MAAOC,CAAAA,oBAAP,KAAiC,kCAAjC,CAGA,QAASC,CAAAA,gBAAT,EAA4B,CAExB,GAAMC,CAAAA,OAAO,CAAGP,UAAU,EAA1B,CAFwB,cAGYJ,QAAQ,CAAC,EAAD,CAHpB,wCAGjBY,UAHiB,eAGLC,aAHK,eAIxB,GAAMC,CAAAA,cAAc,CAAGF,UAAU,CAACG,GAAX,CAAe,kBAAGC,CAAAA,MAAH,MAAGA,MAAH,OAAgBA,CAAAA,MAAhB,EAAf,CAAvB,CAJwB,aAKST,OAAO,CAAC,CACvCS,MAAM,CAAE,EAD+B,CAEvCC,GAAG,CAAE,EAFkC,CAGvCC,SAAS,CAAE,EAH4B,CAAD,CALhB,CAKhBC,YALgB,UAKhBA,YALgB,CAKFC,MALE,UAKFA,MALE,CAWxBnB,SAAS,CAAC,UAAM,CACdQ,oBAAoB,CACjBY,MADH,GAEGC,IAFH,CAEQ,SAACC,oBAAD,CAA0B,CAC9BV,aAAa,CAACU,oBAAD,CAAb,CACD,CAJH,EAKD,CANQ,CAMN,EANM,CAAT,CAQA,mBACE,oBAAC,WAAD,mBACE,kDADF,cAGE,4BAAM,QAAQ,CAAE,kBAACC,KAAD,CAAW,CACzBA,KAAK,CAACC,cAAN,GACA;AAEA,GAAMC,CAAAA,kBAAkB,CAAGd,UAAU,CAACe,IAAX,CAAgB,SAACT,SAAD,CAAe,CACxD,MAAOA,CAAAA,SAAS,CAACF,MAAV,GAAqBI,MAAM,CAACF,SAAnC,CACD,CAF0B,CAA3B,CAIAV,gBAAgB,CAACoB,MAAjB,CAAwB,CACtBZ,MAAM,CAAEI,MAAM,CAACJ,MADO,CAEtBC,GAAG,CAAEG,MAAM,CAACH,GAFU,CAGtBY,WAAW,CAAEH,kBAAkB,CAACI,EAHV,CAAxB,EAKGR,IALH,CAKQ,UAAM,CACVS,OAAO,CAACC,GAAR,CAAY,wBAAZ,EACArB,OAAO,CAACsB,IAAR,CAAa,GAAb,EACD,CARH,EASD,CAjBD,eAmBE,oBAAC,SAAD,EACE,KAAK,CAAC,uBADR,CAEE,IAAI,CAAC,QAFP,CAGE,KAAK,CAAEb,MAAM,CAACJ,MAHhB,CAIE,QAAQ,CAAEG,YAJZ,EAnBF,cA0BE,oBAAC,SAAD,EACE,KAAK,CAAC,KADR,CAEE,IAAI,CAAC,KAFP,CAGE,KAAK,CAAEC,MAAM,CAACH,GAHhB,CAIE,QAAQ,CAAEE,YAJZ,EA1BF,cAiCE,oBAAC,SAAD,EACE,KAAK,CAAC,WADR,CAEE,IAAI,CAAC,WAFP,CAGE,KAAK,CAAEC,MAAM,CAACF,SAHhB,CAIE,QAAQ,CAAEC,YAJZ,CAKE,WAAW,CAAEL,cALf,EAjCF,cAyCE,oBAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,cAzCF,CAHF,cAiDE,8BAjDF,cAkDE,8BAlDF,cAoDE,oBAAC,IAAD,EAAM,EAAE,CAAC,sBAAT,wBApDF,CADF,CA2DH,CAGD,cAAeJ,CAAAA,gBAAf","sourcesContent":["import React, { useState, useEffect} from 'react';\nimport PageDefault from '../../../components/PageDefault';\nimport { Link , useHistory} from 'react-router-dom';\nimport FormField from '../../../components/FormField';\nimport Button from '../../../components/Button';\nimport useForm from '../../../hocks/useForm';\nimport videosRepository from '../../../repositories/videos';\nimport categoriasRepository from '../../../repositories/categorias';\n\n\nfunction CadastroConteudo() {\n\n    const history = useHistory();\n    const [categorias, setCategorias] = useState([]);\n    const categoryTitles = categorias.map(({ titulo }) => titulo);\n    const { handleChange, values } = useForm({\n      titulo: '',\n      url: '',\n      categoria: '',\n    });\n  \n    useEffect(() => {\n      categoriasRepository\n        .getAll()\n        .then((categoriasFromServer) => {\n          setCategorias(categoriasFromServer);\n        });\n    }, []);\n  \n    return (\n      <PageDefault>\n        <h1>Cadastro de Video</h1>\n  \n        <form onSubmit={(event) => {\n          event.preventDefault();\n          // alert('Video Cadastrado com sucesso!!!1!');\n  \n          const categoriaEscolhida = categorias.find((categoria) => {\n            return categoria.titulo === values.categoria;\n          });\n  \n          videosRepository.create({\n            titulo: values.titulo,\n            url: values.url,\n            categoriaId: categoriaEscolhida.id,\n          })\n            .then(() => {\n              console.log('Cadastrou com sucesso!');\n              history.push('/');\n            });\n        }}\n        >\n          <FormField\n            label=\"Título do Vídeo\"\n            name=\"titulo\"\n            value={values.titulo}\n            onChange={handleChange}\n          />\n  \n          <FormField\n            label=\"URL\"\n            name=\"url\"\n            value={values.url}\n            onChange={handleChange}\n          />\n  \n          <FormField\n            label=\"Categoria\"\n            name=\"categoria\"\n            value={values.categoria}\n            onChange={handleChange}\n            suggestions={categoryTitles}\n          />\n  \n          <Button type=\"submit\">\n            Cadastrar\n          </Button>\n        </form>\n  \n        <br />\n        <br />\n  \n        <Link to=\"/cadastro/categorias\">\n          Cadastrar Categoria\n        </Link>\n      </PageDefault>\n    );\n\n}\n\n\nexport default CadastroConteudo;"]},"metadata":{},"sourceType":"module"}